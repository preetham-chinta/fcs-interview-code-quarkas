# ============================================================================
# PROD Profile — External PostgreSQL + Flyway Migrations
#
# All values are env-var driven with sensible fallback defaults.
# Dev Services is automatically disabled when jdbc.url is set.
#
# Flyway owns the schema — Hibernate only validates on startup.
# ============================================================================

# Datasource — external PostgreSQL (env-var overridable)
quarkus.datasource.username=${DB_USERNAME:quarkus_prod}
quarkus.datasource.password=${DB_PASSWORD:quarkus_prod}
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:15432/quarkus_prod}

# Connection pool tuning
quarkus.datasource.jdbc.max-size=${DB_POOL_MAX:20}
quarkus.datasource.jdbc.min-size=${DB_POOL_MIN:5}
quarkus.datasource.jdbc.acquisition-timeout=5S
quarkus.datasource.jdbc.leak-detection-interval=60S

# Hibernate — validate only (Flyway owns the schema)
quarkus.hibernate-orm.database.generation=validate
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.log.sql=false

# Flyway — versioned, auditable migrations
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=db/migration
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0.0.0
quarkus.flyway.validate-on-migrate=true
quarkus.flyway.clean-at-start=false
