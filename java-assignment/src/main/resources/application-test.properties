# ============================================================================
# TEST Profile — PostgreSQL via Dev Services
#
# Same Dev Services mechanism as dev profile. Each test run gets a
# fresh schema via drop-and-create, ensuring a clean slate.
#
# For @QuarkusTest (integration tests), Quarkus auto-starts the container.
# Pure unit tests (Mockito) don't touch the DB and skip this entirely.
# ============================================================================

# Dev Services — auto-start PostgreSQL container for tests
quarkus.datasource.devservices.enabled=true
quarkus.datasource.devservices.image-name=postgres:16-alpine
quarkus.datasource.devservices.db-name=fulfilment_test

# Hibernate — clean schema per test run, seed with sample data
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.sql-load-script=import.sql

# Flyway — disabled (Panache owns the schema in test)
quarkus.flyway.migrate-at-start=false
